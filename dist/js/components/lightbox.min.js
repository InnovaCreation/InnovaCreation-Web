/*! UIkit 3.0.0-beta.27 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitlightbox",i):t.UIkitLightbox=i()}(this,function(){"use strict";function t(i){function e(t,i,e,n,s,a){var r=(t=t in b?b[t]:b.slide).show(s);return{dir:s,current:e,next:n,show:function(t,s){var o=this;return void 0===s&&(s=0),t-=Math.round(t*s),this.translate(s),g.all([x.start(e,r[0],t,i),x.start(n,r[1],t,i)]).then(function(){o.reset(),a()},l)},stop:function(){return g.all([x.stop(n),x.stop(e)])},cancel:function(){return g.all([x.cancel(n),x.cancel(e)])},reset:function(){for(var t in r[0])o([n[0],e[0]]).css(t,"")},forward:function(t){var i=this,s=this.percent();return g.all([x.cancel(n),x.cancel(e)]).then(function(){return i.show(t,s)})},translate:function(i){var o=t.translate(i,s);e.css(o[0]),n.css(o[1])},percent:function(){return t.percent(e,n,s)}}}function n(t){return~~t}if(!t.installed){var s=i.util,o=s.$,a=s.doc,r=s.fastdom,h=s.getIndex,l=s.noop,u=s.on,c=s.off,d=s.pointerDown,f=s.pointerMove,m=s.pointerUp,p=s.preventClick,g=s.promise,v=s.requestAnimationFrame,x=s.Transition;i.mixin.slideshow={attrs:!0,props:{autoplay:Number,animation:String,transition:String,duration:Number},defaults:{autoplay:0,animation:"slide",transition:"linear",duration:400,index:0,stack:[],threshold:10,percent:0,clsActive:"uk-active"},computed:{slides:function(){return this.list.children("."+this.clsItem)},forwardDuration:function(){return this.duration/4}},init:function(){var t=this;["start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){i=i.originalEvent||i,t.prevPos=t.pos,t.pos=(i.touches&&i.touches[0]||i).pageX,e(i)}})},connected:function(){this.startAutoplay()},events:[{name:"click",delegate:function(){return"["+this.attrItem+"]"},handler:function(t){t.preventDefault(),this.show(o(t.currentTarget).blur().attr(this.attrItem))}},{name:d,delegate:function(){return"."+this.clsItem},handler:"start"},{name:d,handler:"stopAutoplay"},{name:"mouseenter",filter:function(){return this.autoplay},handler:function(){this.isHovering=!0}},{name:"mouseleave",filter:function(){return this.autoplay},handler:function(){this.isHovering=!1}}],methods:{start:function(t){if(!(t.button&&0!==t.button||this.slides.length<2)){t.preventDefault();var i=0;if(this.stack.length){this.percent=this._animation.percent();var e=this._animation.dir;i=this.percent*e,this.stack.splice(0,this.stack.length),this._animation.cancel(),this._animation.translate(Math.abs(i)),this.index=this.getIndex(this.index-e),this.touching=!0}u(a,f,this.move,!0),u(a,m,this.end,!0);var n=this.slides.eq(this.index);this.touch={el:n,start:this.pos+(i?n.outerWidth()*i:0)}}},move:function(t){var s=this;t.preventDefault();var o=this.touch,a=o.start,r=o.el;if(!(this.pos===this.prevPos||!this.touching&&Math.abs(a-this.pos)<this.threshold)){this.touching=!0;var u=(this.pos-a)/r.outerWidth();if(this.percent!==u){var c=n(this.percent)!==n(u),d=this.getIndex(this.index-n(u)),f=this.slides.eq(d),m=u<0?1:-1,p=h(u<0?"next":"previous",this.slides,d),g=this.slides.eq(p);this.slides.each(function(t,i){return s.$toggleClass(i,s.clsActive,t===d||t===p)}),c&&this._animation&&this._animation.reset(),this._animation=new e(this.animation,this.transition,f,g,m,l),this._animation.translate(Math.abs(u%1)),this.percent=u,i.update(null,f),i.update(null,g)}}},end:function(t){if(t.preventDefault(),c(a,f,this.move,!0),c(a,m,this.end,!0),this.touching){var i=this.percent;this.percent=Math.abs(this.percent)%1,this.index=this.getIndex(this.index-n(i)),this.percent<.2&&(this.index=this.getIndex(i>0?"previous":"next"),this.percent=1-this.percent,i*=-1),this.show(i>0?"previous":"next",!0),p()}this.pos=this.prevPos=this.touch=this.touching=this.percent=null},show:function(t,n){var s=this;if(void 0===n&&(n=!1),n||!this.touch)if(this.stack[n?"unshift":"push"](t),!n&&this.stack.length>1)2===this.stack.length&&this._animation.forward(this.forwardDuration);else{var o=this.slides.hasClass("uk-active"),a="next"===t?1:"previous"===t?-1:t<this.index?-1:1;if(t=this.getIndex(t),o&&t===this.index)this.stack[n?"shift":"pop"]();else{var h=o&&this.slides.eq(this.index),l=this.slides.eq(t);this.$el.trigger("beforeitemshow",[this,l]),h&&this.$el.trigger("beforeitemhide",[this,h]),this.index=t,this.$addClass(l,this.clsActive),this._animation=new e(h?this.animation:"scale",this.transition,h||l,l,a,function(){h&&s.$removeClass(h,s.clsActive),s.stack.shift(),s.stack.length?v(function(){return s.show(s.stack.shift(),!0)}):s._animation=null,s.$el.trigger("itemshown",[s,l]),i.update(null,l),h&&(s.$el.trigger("itemhidden",[s,h]),i.update(null,h))}),this._animation.show(this.stack.length>1?this.forwardDuration:this.duration,this.percent),this.$el.trigger("itemshow",[this,l]),h&&(this.$el.trigger("itemhide",[this,h]),i.update(null,h)),i.update(null,l),r.flush()}}},getIndex:function(t){return void 0===t&&(t=this.index),h(t,this.slides,this.index)},startAutoplay:function(){var t=this;this.stopAutoplay(),this.autoplay&&(this.interval=setInterval(function(){!t.isHovering&&t.show("next")},this.autoplay))},stopAutoplay:function(){this.interval&&clearInterval(this.interval)}}};var b={fade:{show:function(){return[{opacity:0},{opacity:1}]},percent:function(t){return 1-t.css("opacity")},translate:function(t){return[{opacity:1-t},{opacity:t}]}},slide:{show:function(t){return[{transform:"translate3d("+-100*t+"%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}]},percent:function(t){return Math.abs(t.css("transform").split(",")[4]/t.outerWidth())},translate:function(t,i){return[{transform:"translate3d("+-100*i*t+"%, 0, 0)"},{transform:"translate3d("+100*i*(1-t)+"%, 0, 0)"}]}},scale:{show:function(){return[{opacity:0,transform:"scale3d(0.8, 0.8, 1)"},{opacity:1,transform:"scale3d(1, 1, 1)"}]},percent:function(t){return 1-t.css("opacity")},translate:function(t){var i=1-.2*t,e=.8+.2*t;return[{opacity:1-t,transform:"scale3d("+i+", "+i+", 1)"},{opacity:t,transform:"scale3d("+e+", "+e+", 1)"}]}},swipe:{show:function(t){return t<0?[{opacity:1,transform:"translate3d(100%, 0, 0)",zIndex:0},{opacity:1,transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)",zIndex:-1}]:[{opacity:.3,transform:"scale3d(0.8, 0.8, 1) translate3d(-20%, 0, 0)",zIndex:-1},{opacity:1,transform:"translate3d(0, 0, 0)",zIndex:0}]},percent:function(t,i,e){var n=e<0?t:i,s=Math.abs(n.css("transform").split(",")[4]/n.outerWidth());return e<0?s:1-s},translate:function(t,i){var e;return i<0?(e=1-.2*(1-t),[{opacity:1,transform:"translate3d("+100*t+"%, 0, 0)",zIndex:0},{opacity:.3+.7*t,transform:"scale3d("+e+", "+e+", 1) translate3d("+-20*(1-t)+"%, 0, 0)",zIndex:-1}]):(e=1-.2*t,[{opacity:1-.7*t,transform:"scale3d("+e+", "+e+", 1) translate3d("+-20*t+"%, 0, 0)",zIndex:-1},{opacity:1,transform:"translate3d("+100*(1-t)+"%, 0, 0)",zIndex:0}])}}}}}function i(e){function n(t,i,e){void 0===e&&(e="in"),t.each(function(n){return l[e](t.eq(n).attr("hidden",!1),i).then(function(){"out"===e&&t.eq(n).attr("hidden",!0)})})}function s(t,i,e){return'<iframe src="'+t+'" width="'+i+'" height="'+e+'" style="max-width: 100%; box-sizing: border-box;" uk-video uk-responsive></iframe>'}if(!i.installed){e.use(t);var o=e.mixin,a=e.util,r=a.$,h=a.$trigger,l=a.Animation,u=a.ajax,c=a.assign,d=a.doc,f=a.docElement,m=a.getData,p=a.getImage,g=a.pointerDown,v=a.pointerMove,x=a.Transition;e.component("lightbox",{attrs:!0,props:{animation:String,toggle:String},defaults:{animation:void 0,toggle:"a"},computed:{toggles:function(){var t=this,i=r(this.toggle,this.$el);return this._changed=!this._toggles||i.length!==this._toggles.length||i.toArray().some(function(i,e){return i!==t._toggles.get(e)}),this._toggles=i}},disconnected:function(){this.panel&&(this.panel.$destroy(!0),this.panel=null)},events:[{name:"click",delegate:function(){return this.toggle+":not(.uk-disabled)"},handler:function(t){t.preventDefault(),this.show(this.toggles.index(r(t.currentTarget).blur()))}}],update:function(){this.panel&&this.animation&&(this.panel.$props.animation=this.animation,this.panel.$emit()),this.toggles.length&&this._changed&&this.panel&&(this.panel.$destroy(!0),this._init())},methods:{_init:function(){return this.panel=this.panel||e.lightboxPanel({animation:this.animation,items:this.toggles.toArray().reduce(function(t,i){return t.push(["href","caption","type"].reduce(function(t,e){return t["href"===e?"source":e]=m(i,e),t},{})),t},[])})},show:function(t){return this.panel||this._init(),this.panel.show(t)},hide:function(){return this.panel&&this.panel.hide()}}}),e.component("lightbox-panel",{mixins:[o.togglable,o.slideshow],functional:!0,defaults:{preload:1,delayControls:3e3,items:[],cls:"uk-open",clsPage:"uk-lightbox-page",clsItem:"uk-lightbox-item",attrItem:"uk-lightbox-item",template:'<div class="uk-lightbox uk-overflow-hidden"><ul class="uk-lightbox-items"></ul><div class="uk-lightbox-toolbar uk-position-top uk-text-right"><button class="uk-lightbox-toolbar-icon uk-close-large" type="button" uk-close uk-toggle="!.uk-lightbox"></button></div><a class="uk-lightbox-button uk-position-center-left uk-position-medium" href="#" uk-slidenav-previous uk-lightbox-item="previous"></a><a class="uk-lightbox-button uk-position-center-right uk-position-medium" href="#" uk-slidenav-next uk-lightbox-item="next"></a><div class="uk-lightbox-toolbar uk-lightbox-caption uk-position-bottom uk-text-center"></div></div>'},computed:{container:function(){return r(!0===this.$props.container&&e.container||this.$props.container||e.container)}},created:function(){var t=this;this.$mount(r(this.template).appendTo(this.container)[0]),this.list=this.$el.find(".uk-lightbox-items"),this.toolbars=this.$el.find(".uk-lightbox-toolbar"),this.nav=this.$el.find("a[uk-lightbox-item]"),this.caption=this.$el.find(".uk-lightbox-caption"),this.items.forEach(function(i,e){return t.list.append('<li class="'+t.clsItem+" item-"+e+'"></li>')})},events:[{name:v+" "+g+" keydown",handler:"showControls"},{name:"click",self:!0,handler:function(t){t.preventDefault(),this.hide()}},{name:"click",self:!0,delegate:function(){return"."+this.clsItem},handler:function(t){t.preventDefault(),this.hide()}},{name:"show",self:!0,handler:function(){this.$addClass(f,this.clsPage)}},{name:"shown",self:!0,handler:function(){this.$addClass(this.caption,"uk-animation-slide-bottom"),this.toolbars.attr("hidden",!0),this.nav.attr("hidden",!0),this.showControls()}},{name:"hide",self:!0,handler:function(){this.$removeClass(this.caption,"uk-animation-slide-bottom"),this.toolbars.attr("hidden",!0),this.nav.attr("hidden",!0)}},{name:"hidden",self:!0,handler:function(){this.$removeClass(f,this.clsPage)}},{name:"keydown",el:function(){return d},handler:function(t){if(this.isToggled(this.$el))switch(t.keyCode){case 27:this.hide();break;case 37:this.show("previous");break;case 39:this.show("next")}}},{name:"toggle",handler:function(t){t.preventDefault(),this.toggle()}},{name:"beforeitemshow",self:!0,handler:function(){this.isToggled()||this.toggleNow(this.$el,!0)}},{name:"itemshow",self:!0,handler:function(){var t=this,i=this.getItem().caption;this.caption.toggle(!!i).html(i);for(var e=0;e<=this.preload;e++)t.loadItem(t.getIndex(t.index+e)),t.loadItem(t.getIndex(t.index-e))}},{name:"itemload",handler:function(t,i){var e,n=this,o=i.source,a=i.type;if(this.setItem(i,"<span uk-spinner></span>"),o){if("image"===a||o.match(/\.(jp(e)?g|png|gif|svg)$/i))p(o).then(function(t){return n.setItem(i,'<img width="'+t.width+'" height="'+t.height+'" src="'+o+'">')},function(){return n.setError(i)});else if("video"===a||o.match(/\.(mp4|webm|ogv)$/i))var h=r("<video controls playsinline uk-video></video>").on("loadedmetadata",function(){return n.setItem(i,h.attr({width:h[0].videoWidth,height:h[0].videoHeight}))}).on("error",function(){return n.setError(i)}).attr("src",o);else if("iframe"===a)this.setItem(i,'<iframe class="uk-lightbox-iframe" src="'+o+'" frameborder="0" allowfullscreen></iframe>');else if(e=o.match(/\/\/.*?youtube\.[a-z]+\/watch\?v=([^&\s]+)/)||o.match(/youtu\.be\/(.*)/)){var l=e[1],c=function(t,e){return void 0===t&&(t=640),void 0===e&&(e=450),n.setItem(i,s("//www.youtube.com/embed/"+l,t,e))};p("//img.youtube.com/vi/"+l+"/maxresdefault.jpg").then(function(t){120===t.width&&90===t.height?p("//img.youtube.com/vi/"+l+"/0.jpg").then(function(t){return c(t.width,t.height)},c):c(t.width,t.height)},c)}else{if(!(e=o.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/)))return;u({type:"GET",url:"//vimeo.com/api/oembed.json?url="+encodeURI(o),jsonp:"callback",dataType:"jsonp"}).then(function(t){var o=t.height,a=t.width;return n.setItem(i,s("//player.vimeo.com/video/"+e[2],a,o))})}return!0}}}],methods:{toggle:function(){return this.isToggled()?this.hide():this.show()},hide:function(){this.isToggled()&&this.toggleNow(this.$el,!1),this.slides.removeClass(this.clsActive).each(function(t,i){return x.stop(i)}),delete this.index,delete this.percent,delete this._animation},loadItem:function(t){void 0===t&&(t=this.index);var i=this.getItem(t);i.content||h(this.$el,"itemload",[i],!0).result||this.setError(i)},getItem:function(t){return void 0===t&&(t=this.index),this.items[t]||{}},setItem:function(t,i){c(t,{content:i});var n=this.slides.eq(this.items.indexOf(t)).html(i);this.$el.trigger("itemloaded",[this,n]),e.update(null,n)},setError:function(t){this.setItem(t,'<span uk-icon="icon: bolt; ratio: 2"></span>')},showControls:function(){clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.hideControls,this.delayControls),this.toolbars.attr("hidden")&&(n(this.toolbars.eq(0),"uk-animation-slide-top"),n(this.toolbars.eq(1),"uk-animation-slide-bottom"),this.nav.attr("hidden",this.items.length<=1),this.items.length>1&&n(this.nav,"uk-animation-fade"))},hideControls:function(){this.toolbars.attr("hidden")||(n(this.toolbars.eq(0),"uk-animation-slide-top","out"),n(this.toolbars.eq(1),"uk-animation-slide-bottom","out"),this.items.length>1&&n(this.nav,"uk-animation-fade","out"))}}})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(i),i});