/*! UIkit 3.0.0-beta.35 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("uikitsortable",e):t.UIkitSortable=e()}(this,function(){"use strict";function t(e){function i(t){return t&&(e.getComponent(t,"sortable")||i(t.parentNode))}function s(t,e){return t.parentNode===e.parentNode&&y(t)>y(e)}if(!t.installed){var o=e.mixin,r=e.util,h=r.addClass,l=r.after,n=r.assign,a=r.append,c=r.attr,d=r.before,p=r.closest,u=r.css,f=r.doc,g=r.docEl,m=r.height,v=r.fastdom,$=r.getPos,b=r.includes,y=r.index,x=r.isInput,S=r.noop,k=r.offset,w=r.off,E=r.on,D=r.pointerDown,C=r.pointerMove,N=r.pointerUp,Y=r.position,I=r.preventClick,P=r.Promise,H=r.remove,T=r.removeClass,M=r.toggleClass,U=r.toNodes,B=r.Transition,L=r.trigger,j=r.win,O=r.within;e.component("sortable",{mixins:[o.class],props:{group:String,animation:Number,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},defaults:{group:!1,animation:150,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1},init:function(){var t=this;["init","start","move","end"].forEach(function(e){var i=t[e];t[e]=function(e){t.scrollY=j.pageYOffset;var s=$(e),o=s.x,r=s.y;t.pos={x:o,y:r},i(e)}})},events:(W={},W[D]="init",W),update:{write:function(){if(this.clsEmpty&&M(this.$el,this.clsEmpty,!this.$el.children.length),this.drag){k(this.drag,{top:this.pos.y+this.origin.top,left:this.pos.x+this.origin.left});var t,e=k(this.drag).top,i=e+this.drag.offsetHeight;e>0&&e<this.scrollY?t=this.scrollY-5:i<m(f)&&i>m(j)+this.scrollY&&(t=this.scrollY+5),t&&setTimeout(function(){return j.scrollTo(j.scrollX,t)},5)}}},methods:{init:function(t){var e=t.target,i=t.button,s=t.defaultPrevented,o=U(this.$el.children).filter(function(t){return O(e,t)})[0];!o||x(t.target)||this.handle&&!O(e,this.handle)||i>0||O(e,"."+this.clsNoDrag)||s||(t.preventDefault(),this.touched=[this],this.placeholder=o,this.origin=n({target:e,index:y(o)},this.pos),E(g,C,this.move),E(g,N,this.end),E(j,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){this.drag=a(e.container,this.placeholder.outerHTML.replace(/^<li/i,"<div").replace(/li>$/i,"div>")),u(this.drag,n({boxSizing:"border-box",width:this.placeholder.offsetWidth,height:this.placeholder.offsetHeight},u(this.placeholder,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),c(this.drag,"uk-no-boot",""),h(this.drag,this.clsDrag,this.clsCustom),m(this.drag.firstElementChild,m(this.placeholder.firstElementChild));var i=k(this.placeholder),s=i.left,o=i.top;n(this.origin,{left:s-this.pos.x,top:o-this.pos.y}),h(this.placeholder,this.clsPlaceholder),h(this.$el.children,this.clsItem),h(g,this.clsDragState),L(this.$el,"start",[this,this.placeholder,this.drag]),this.move(t)},move:function(t){if(this.drag){this.$emit();var e="mousemove"===t.type?t.target:f.elementFromPoint(this.pos.x-f.body.scrollLeft,this.pos.y-f.body.scrollTop),s=i(e),o=i(this.placeholder),r=s!==o;if(s&&!O(e,this.placeholder)&&(!r||s.group&&s.group===o.group)){if(e=s.$el===e.parentNode&&e||U(s.$el.children).filter(function(t){return O(e,t)})[0],r)o.remove(this.placeholder);else if(!e)return;s.insert(this.placeholder,e),b(this.touched,s)||this.touched.push(s)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},scroll:function(){var t=j.pageYOffset;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$emit())},end:function(t){if(w(g,C,this.move),w(g,N,this.end),w(j,"scroll",this.scroll),this.drag){I();var e=i(this.placeholder);this===e?this.origin.index!==y(this.placeholder)&&L(this.$el,"moved",[this,this.placeholder]):(L(e.$el,"added",[e,this.placeholder]),L(this.$el,"removed",[this,this.placeholder])),L(this.$el,"stop",[this]),H(this.drag),this.drag=null;var s=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return T(t.$el.children,s)}),T(g,this.clsDragState)}else"mouseup"!==t.type&&O(t.target,"a[href]")&&(location.href=p(t.target,"a[href]").href)},insert:function(t,e){var i=this;h(this.$el.children,this.clsItem);var o=function(){e?!O(t,i.$el)||s(t,e)?d(e,t):l(e,t):a(i.$el,t)};this.animation?this.animate(o):o()},remove:function(t){O(t,this.$el)&&(this.animation?this.animate(function(){return H(t)}):H(t))},animate:function(t){var e=this,i=[],s=U(this.$el.children),o={position:"",width:"",height:"",pointerEvents:"",top:"",left:"",bottom:"",right:""};s.forEach(function(t){i.push(n({position:"absolute",pointerEvents:"none",width:t.offsetWidth,height:t.offsetHeight},Y(t)))}),t(),s.forEach(B.cancel),u(this.$el.children,o),this.$update("update",!0),v.flush(),u(this.$el,"minHeight",m(this.$el));var r=s.map(function(t){return Y(t)});P.all(s.map(function(t,s){return B.start(u(t,i[s]),r[s],e.animation)})).then(function(){u(e.$el,"minHeight",""),u(s,o),e.$update("update",!0),v.flush()},S)}}});var W}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});