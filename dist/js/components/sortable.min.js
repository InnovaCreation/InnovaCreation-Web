/*! UIkit 3.0.0-beta.35 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitsortable",i):t.UIkitSortable=i()}(this,function(){"use strict";function t(i){if(!t.installed){var e=i.mixin,s=i.util,o=s.addClass,r=s.after,h=s.assign,l=s.append,n=s.attr,a=s.before,c=s.closest,d=s.css,p=s.doc,u=s.docEl,f=s.height,g=s.fastdom,m=s.getPos,v=s.includes,$=s.index,b=s.isInput,y=s.noop,x=s.offset,S=s.off,k=s.on,w=s.pointerDown,E=s.pointerMove,D=s.pointerUp,C=s.position,N=s.preventClick,Y=s.Promise,I=s.remove,P=s.removeClass,H=s.toggleClass,T=s.toNodes,M=s.Transition,U=s.trigger,B=s.win,L=s.within;i.component("sortable",{mixins:[e.class],props:{group:String,animation:Number,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},defaults:{group:!1,animation:150,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1},init:function(){var t=this;["init","start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){t.scrollY=B.scrollY;var s=m(i),o=s.x,r=s.y;t.pos={x:o,y:r},e(i)}})},events:(j={},j[w]="init",j),update:{write:function(){if(this.clsEmpty&&H(this.$el,this.clsEmpty,!this.$el.children.length),this.drag){x(this.drag,{top:this.pos.y+this.origin.top,left:this.pos.x+this.origin.left});var t,i=x(this.drag).top,e=i+this.drag.offsetHeight;i>0&&i<this.scrollY?t=this.scrollY-5:e<f(p)&&e>f(B)+this.scrollY&&(t=this.scrollY+5),t&&setTimeout(function(){return B.scrollTo(B.scrollX,t)},5)}}},methods:{init:function(t){var i=t.target,e=t.button,s=t.defaultPrevented,o=T(this.$el.children).filter(function(t){return L(i,t)})[0];!o||b(t.target)||this.handle&&!L(i,this.handle)||e>0||L(i,"."+this.clsNoDrag)||s||(t.preventDefault(),this.touched=[this],this.placeholder=o,this.origin=h({target:i,index:$(o)},this.pos),k(u,E,this.move),k(u,D,this.end),k(B,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){this.drag=l(i.container,this.placeholder.outerHTML.replace(/^<li/i,"<div").replace(/li>$/i,"div>")),d(this.drag,h({boxSizing:"border-box",width:this.placeholder.offsetWidth,height:this.placeholder.offsetHeight},d(this.placeholder,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),n(this.drag,"uk-no-boot",""),o(this.drag,this.clsDrag,this.clsCustom),f(this.drag.firstElementChild,f(this.placeholder.firstElementChild));var e=x(this.placeholder),s=e.left,r=e.top;h(this.origin,{left:s-this.pos.x,top:r-this.pos.y}),o(this.placeholder,this.clsPlaceholder),o(this.$el.children,this.clsItem),o(u,this.clsDragState),U(this.$el,"start",[this,this.placeholder,this.drag]),this.move(t)},move:function(t){if(this.drag){this.$emit();var i="mousemove"===t.type?t.target:p.elementFromPoint(this.pos.x-p.body.scrollLeft,this.pos.y-p.body.scrollTop),e=W(i),s=W(this.placeholder),o=e!==s;if(e&&!L(i,this.placeholder)&&(!o||e.group&&e.group===s.group)){if(i=e.$el===i.parentNode&&i||T(e.$el.children).filter(function(t){return L(i,t)})[0],o)s.remove(this.placeholder);else if(!i)return;e.insert(this.placeholder,i),v(this.touched,e)||this.touched.push(e)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},scroll:function(){var t=B.scrollY;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$emit())},end:function(t){if(S(u,E,this.move),S(u,D,this.end),S(B,"scroll",this.scroll),this.drag){N();var i=W(this.placeholder);this===i?this.origin.index!==$(this.placeholder)&&U(this.$el,"moved",[this,this.placeholder]):(U(i.$el,"added",[i,this.placeholder]),U(this.$el,"removed",[this,this.placeholder])),U(this.$el,"stop",[this]),I(this.drag),this.drag=null;var e=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return P(t.$el.children,e)}),P(u,this.clsDragState)}else"mouseup"!==t.type&&L(t.target,"a[href]")&&(location.href=c(t.target,"a[href]").href)},insert:function(t,i){var e=this;o(this.$el.children,this.clsItem);var s=function(){i?!L(t,e.$el)||(s=t,o=i,s.parentNode===o.parentNode&&$(s)>$(o))?a(i,t):r(i,t):l(e.$el,t);var s,o};this.animation?this.animate(s):s()},remove:function(t){L(t,this.$el)&&(this.animation?this.animate(function(){return I(t)}):I(t))},animate:function(t){var i=this,e=[],s=T(this.$el.children),o={position:"",width:"",height:"",pointerEvents:"",top:"",left:"",bottom:"",right:""};s.forEach(function(t){e.push(h({position:"absolute",pointerEvents:"none",width:t.offsetWidth,height:t.offsetHeight},C(t)))}),t(),s.forEach(M.cancel),d(this.$el.children,o),this.$update("update",!0),g.flush(),d(this.$el,"minHeight",f(this.$el));var r=s.map(function(t){return C(t)});Y.all(s.map(function(t,s){return M.start(d(t,e[s]),r[s],i.animation)})).then(function(){d(i.$el,"minHeight",""),d(s,o),i.$update("update",!0),g.flush()},y)}}});var j}function W(t){return t&&(i.getComponent(t,"sortable")||W(t.parentNode))}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});