/*! UIkit 3.0.0-beta.27 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){function r(e){return e.split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return parseFloat(e)})}function i(e,t){return+(u(e.diff)?+e.end:e.start+e.diff*t*(e.start<e.end?1:-1)).toFixed(2)}if(!e.installed){var s=t.mixin,a=t.util,o=a.assign,n=a.clamp,c=a.Dimensions,l=a.getImage,u=a.isUndefined,p=a.scrolledOver,d=a.query,f=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];s.parallax={props:f.reduce(function(e,t){return e[t]="list",e},{easing:Number,media:"media"}),defaults:f.reduce(function(e,t){return e[t]=void 0,e},{easing:1,media:!1}),computed:{props:function(){var e=this;return f.reduce(function(t,i){if(u(e.$props[i]))return t;var s=i.match(/color/i),a=s||"opacity"===i,n=e.$props[i];a&&e.$el.css(i,"");var c,l=(u(n[1])?"scale"===i?1:a?e.$el.css(i):0:n[0])||0,p=u(n[1])?n[0]:n[1],d=~n.join("").indexOf("%")?"%":"px";if(s){var f=e.$el[0].style.color;e.$el[0].style.color=l,l=r(e.$el.css("color")),e.$el[0].style.color=p,p=r(e.$el.css("color")),e.$el[0].style.color=f}else l=parseFloat(l),p=parseFloat(p),c=Math.abs(l-p);if(t[i]={start:l,end:p,diff:c,unit:d},i.match(/^bg/)){var h="background-position-"+i[2];t[i].pos=e.$el.css(h,"").css("background-position").split(" ")["x"===i[2]?0:1],e.covers&&o(t[i],{start:0,end:l<=p?c:-c})}return t},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(){return"cover"===this.$el.css("backgroundSize","").css("backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(){var e=this;if(delete this._computeds.props,this._active=!this.media||window.matchMedia(this.media).matches,this._image&&(this._image.dimEl={width:this.$el[0].offsetWidth,height:this.$el[0].offsetHeight}),u(this._image)&&this.covers&&this.bgProps.length){var t=this.$el.css("backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");t&&(this._image=!1,l(t).then(function(t){e._image={width:t.naturalWidth,height:t.naturalHeight},e.$emit()}))}},write:function(){var e=this;if(this._image)if(this._active){var t=this._image,r=t.dimEl,i=c.cover(t,r);this.bgProps.forEach(function(s){var a=e.props[s],o=a.start,l=a.end,u=a.pos,p=a.diff,d="bgy"===s?"height":"width",f=i[d]-r[d];if(u.match(/%$/)){if(o>=l)f<p?(r[d]=i[d]+p-f,e.props[s].pos="0px"):(u=-1*f/100*parseFloat(u),u=n(u,p-f,0),e.props[s].pos=u+"px");else{if(f<p)r[d]=i[d]+p-f;else if(f/100*parseFloat(u)>p)return;e.props[s].pos="-"+p+"px"}i=c.cover(t,r)}}),this.$el.css({backgroundSize:i.width+"px "+i.height+"px",backgroundRepeat:"no-repeat"})}else this.$el.css({backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;Object.keys(this.getCss(0)).forEach(function(t){return e.$el.css(t,"")})},getCss:function(e){var t=!1,r=this.props;return Object.keys(r).reduce(function(s,a){var o=r[a],n=i(o,e);switch(a){case"x":case"y":if(t)break;var c=["x","y"].map(function(t){return a===t?n+o.unit:r[t]?i(r[t],e)+r[t].unit:0}),l=c[0],u=c[1];t=s.transform+=" translate3d("+l+", "+u+", 0)";break;case"rotate":s.transform+=" rotate("+n+"deg)";break;case"scale":s.transform+=" scale("+n+")";break;case"bgy":case"bgx":s["background-position-"+a[2]]="calc("+o.pos+" + "+(n+o.unit)+")";break;case"color":case"backgroundColor":case"borderColor":s[a]="rgba("+o.start.map(function(t,r){return t+=e*(o.end[r]-t),3===r?parseFloat(t):parseInt(t,10)}).join(",")+")";break;case"blur":s.filter+=" blur("+n+"px)";break;case"hue":s.filter+=" hue-rotate("+n+"deg)";break;case"fopacity":s.filter+=" opacity("+n+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":s.filter+=" "+a+"("+n+"%)";break;default:s[a]=n}return s},{transform:"",filter:""})}}},t.component("parallax",{mixins:[s.parallax],props:{target:String,viewport:Number},defaults:{target:!1,viewport:1},computed:{target:function(){return this.$props.target&&d(this.$props.target,this.$el)||this.$el}},disconnected:function(){delete this._prev},update:[{read:function(){delete this._prev}},{read:function(){var e=p(this.target)/(this.viewport||1);this._percent=n(e*(1-(this.easing-this.easing*e)))},write:function(){this._active?this._prev!==this._percent&&(this.$el.css(this.getCss(this._percent)),this._prev=this._percent):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});