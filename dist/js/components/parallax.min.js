/*! UIkit 3.0.0-beta.35 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){if(!e.installed){var r=t.mixin,i=t.util,a=i.clamp,n=i.css,o=i.Dimensions,s=i.each,c=i.getImage,u=i.includes,l=i.isNumber,p=i.isUndefined,f=i.scrolledOver,d=i.toFloat,h=i.query,g=i.win,m=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];r.parallax={props:m.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:m.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(e,t){var r=this;return m.reduce(function(i,a){if(p(e[a]))return i;var o,s,c,l=a.match(/color/i),f=l||"opacity"===a,h=e[a].slice(0);f&&n(t,a,""),h.length<2&&h.unshift(("scale"===a?1:f?n(t,a):0)||0);var g=u(h.join(""),"%")?"%":"px";if(l){var m=t.style.color;h=h.map(function(e){return n(n(t,"color",e),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return d(e)})}),t.style.color=m}else h=h.map(d);if(a.match(/^bg/))if(n(t,"background-position-"+a[2],""),s=n(t,"backgroundPosition").split(" ")["x"===a[2]?0:1],r.covers){var b=Math.min.apply(Math,h),v=Math.max.apply(Math,h),k=h.indexOf(b)<h.indexOf(v);c=v-b,h=h.map(function(e){return e-(k?b:v)}),o=(k?-c:0)+"px"}else o=s;return i[a]={steps:h,unit:g,pos:o,bgPos:s,diff:c},i},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return"cover"===n(""!==t.style.backgroundSize?n(t,"backgroundSize",""):t,"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(e){var t=this;if(this._resetComputeds(),e.active=!this.media||g.matchMedia(this.media).matches,e.image&&(e.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in e)&&this.covers&&this.bgProps.length){var r=n(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");r&&(e.image=!1,c(r).then(function(r){e.image={width:r.naturalWidth,height:r.naturalHeight},t.$emit()}))}},write:function(e){var t=this,r=e.image,i=e.active;if(r)if(i){var a=r.dimEl,s=o.cover(r,a);this.bgProps.forEach(function(e){var i=t.props[e],n=i.diff,c=i.bgPos,u=i.steps,l="bgy"===e?"height":"width",p=s[l]-a[l];c.match(/%$|0px/)&&(p<n?a[l]=s[l]+n-p:p>n&&(c=parseFloat(c))&&(t.props[e].steps=u.map(function(e){return e-(p-n)/(100/c)})),s=o.cover(r,a))}),n(this.$el,{backgroundSize:s.width+"px "+s.height+"px",backgroundRepeat:"no-repeat"})}else n(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;s(this.getCss(0),function(t,r){return n(e.$el,r,"")})},getCss:function(e){var t=!1,r=this.props;return Object.keys(r).reduce(function(i,a){var n=r[a],o=n.steps,s=n.unit,c=n.pos,u=v(o,e);switch(a){case"x":case"y":if(t)break;var l=["x","y"].map(function(t){return a===t?u+s:r[t]?v(r[t].steps,e)+r[t].unit:0}),p=l[0],f=l[1];t=i.transform+=" translate3d("+p+", "+f+", 0)";break;case"rotate":i.transform+=" rotate("+u+"deg)";break;case"scale":i.transform+=" scale("+u+")";break;case"bgy":case"bgx":i["background-position-"+a[2]]="calc("+c+" + "+(u+s)+")";break;case"color":case"backgroundColor":case"borderColor":var h=b(o,e),g=h[0],m=h[1],k=h[2];i[a]="rgba("+g.map(function(e,t){return e+=k*(m[t]-e),3===t?d(e):parseInt(e,10)}).join(",")+")";break;case"blur":i.filter+=" blur("+u+"px)";break;case"hue":i.filter+=" hue-rotate("+u+"deg)";break;case"fopacity":i.filter+=" opacity("+u+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":i.filter+=" "+a+"("+u+"%)";break;default:i[a]=u}return i},{transform:"",filter:""})}}},t.component("parallax",{mixins:[r.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var r=e.target;return r&&h(r,t)||t}},update:[{read:function(e){return{prev:e.percent,percent:(t=f(this.target)/(this.viewport||1),r=this.easing,a(t*(1-(r-r*t))))};var t,r},write:function(e,t){var r=e.prev,i=e.percent,a=e.active;"scroll"!==t.type&&(r=!1),a?r!==i&&n(this.$el,this.getCss(i)):this.reset()},events:["scroll","load","resize"]}]})}function b(e,t){var r=e.length-1,i=Math.min(Math.floor(r*t),r-1),a=e.slice(i,i+2);return a.push(1===t?1:t%(1/r)*r),a}function v(e,t){var r=b(e,t),i=r[0],a=r[1],n=r[2];return(l(i)?i+Math.abs(i-a)*n*(i<a?1:-1):+a).toFixed(2)}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});