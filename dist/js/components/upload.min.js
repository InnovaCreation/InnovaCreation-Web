/*! UIkit 3.0.0-beta.27 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitupload",t):e.UIkitUpload=t()}(this,function(){"use strict";function e(t){function a(e,t){return t.match(new RegExp("^"+e.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$","i"))}function r(e,t){for(var a=[],r=0;r<e.length;r+=t){for(var n=[],l=0;l<t;l++)n.push(e[r+l]);a.push(n)}return a}if(!e.installed){var n=t.util,l=n.$,o=n.ajax,i=n.on;t.component("upload",{props:{allow:String,clsDragover:String,concurrent:Number,dataType:String,mime:String,msgInvalidMime:String,msgInvalidName:String,multiple:Boolean,name:String,params:Object,type:String,url:String},defaults:{allow:!1,clsDragover:"uk-dragover",concurrent:1,dataType:void 0,mime:!1,msgInvalidMime:"Invalid File Type: %s",msgInvalidName:"Invalid File Name: %s",multiple:!1,name:"files[]",params:{},type:"POST",url:"",abort:null,beforeAll:null,beforeSend:null,complete:null,completeAll:null,error:null,fail:function(e){alert(e)},load:null,loadEnd:null,loadStart:null,progress:null},events:{change:function(e){l(e.target).is('input[type="file"]')&&(e.preventDefault(),e.target.files&&this.upload(e.target.files),e.target.value="")},drop:function(e){e.preventDefault(),e.stopPropagation();var t=e.originalEvent.dataTransfer;t&&t.files&&(this.$removeClass(this.clsDragover),this.upload(t.files))},dragenter:function(e){e.preventDefault(),e.stopPropagation()},dragover:function(e){e.preventDefault(),e.stopPropagation(),this.$addClass(this.clsDragover)},dragleave:function(e){e.preventDefault(),e.stopPropagation(),this.$removeClass(this.clsDragover)}},methods:{upload:function(e){var t=this;if(e.length){this.$el.trigger("upload",[e]);for(var n=0;n<e.length;n++){if(t.allow&&!a(t.allow,e[n].name))return void t.fail(t.msgInvalidName.replace(/%s/,t.allow));if(t.mime&&!a(t.mime,e[n].type))return void t.fail(t.msgInvalidMime.replace(/%s/,t.mime))}this.multiple||(e=[e[0]]),this.beforeAll&&this.beforeAll(this,e);var s=r(e,this.concurrent),p=function(e){var a=new FormData;e.forEach(function(e){return a.append(t.name,e)});for(var r in t.params)a.append(r,t.params[r]);o({data:a,url:t.url,type:t.type,dataType:t.dataType,beforeSend:t.beforeSend,complete:[t.complete,function(e,a){s.length?p(s.shift()):t.completeAll&&t.completeAll(e),"abort"===a&&t.abort&&t.abort(e)}],cache:!1,contentType:!1,processData:!1,xhr:function(){var e=l.ajaxSettings.xhr();return e.upload&&t.progress&&i(e.upload,"progress",t.progress),["loadStart","load","loadEnd","error","abort"].forEach(function(a){return t[a]&&i(e,a.toLowerCase(),t[a])}),e}})};p(s.shift())}}}})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});